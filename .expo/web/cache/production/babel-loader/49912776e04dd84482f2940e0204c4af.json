{"ast":null,"code":"import _objectSpread from\"@babel/runtime/helpers/objectSpread\";import _extends from\"@babel/runtime/helpers/extends\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";var _jsxFileName=\"/Users/satya/Workspace/Callstack/react-navigation-stack/src/views/StackView/StackViewCard.tsx\";import*as React from'react';import Animated from\"react-native-web/dist/exports/Animated\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Platform from\"react-native-web/dist/exports/Platform\";import{Screen}from'react-native-screens';import{ThemeContext,ThemeColors}from'react-navigation';import createPointerEventsContainer from\"./createPointerEventsContainer\";var EPS=1e-5;function getAccessibilityProps(isActive){if(Platform.OS==='ios'){return{accessibilityElementsHidden:!isActive};}else if(Platform.OS==='android'){return{importantForAccessibility:isActive?'yes':'no-hide-descendants'};}else{return{};}}var Card=function(_React$Component){_inherits(Card,_React$Component);function Card(){_classCallCheck(this,Card);return _possibleConstructorReturn(this,_getPrototypeOf(Card).apply(this,arguments));}_createClass(Card,[{key:\"render\",value:function render(){var _this$props=this.props,children=_this$props.children,pointerEvents=_this$props.pointerEvents,style=_this$props.style,position=_this$props.position,transparent=_this$props.transparent,_this$props$scene=_this$props.scene,index=_this$props$scene.index,isActive=_this$props$scene.isActive;var active=Platform.select({web:isActive,default:transparent||isActive?1:position.interpolate({inputRange:[index,index+1-EPS,index+1],outputRange:[1,1,0],extrapolate:'clamp'})});var animatedStyle=this.props.animatedStyle||{};var shadowOpacity=animatedStyle.shadowOpacity,overlayOpacity=animatedStyle.overlayOpacity,containerAnimatedStyle=_objectWithoutProperties(animatedStyle,[\"shadowOpacity\",\"overlayOpacity\"]);var flattenedStyle=StyleSheet.flatten(style)||{};var backgroundColor=flattenedStyle.backgroundColor,screenStyle=_objectWithoutProperties(flattenedStyle,[\"backgroundColor\"]);var isDark=this.context==='dark';var baseCardStyle;if(isDark){baseCardStyle=transparent?styles.transparentDark:styles.cardDark;}else{baseCardStyle=transparent?styles.transparentLight:styles.cardLight;}return React.createElement(Screen,{pointerEvents:pointerEvents,onComponentRef:this.props.onComponentRef,style:[containerAnimatedStyle,screenStyle],active:active,__source:{fileName:_jsxFileName,lineNumber:93}},!transparent&&shadowOpacity?React.createElement(Animated.View,{style:[styles.shadow,{shadowOpacity:shadowOpacity}],pointerEvents:\"none\",__source:{fileName:_jsxFileName,lineNumber:101}}):null,React.createElement(Animated.View,_extends({},getAccessibilityProps(isActive),{style:[baseCardStyle,backgroundColor&&backgroundColor!=='transparent'?{backgroundColor:backgroundColor}:null],__source:{fileName:_jsxFileName,lineNumber:106}}),children),overlayOpacity?React.createElement(Animated.View,{pointerEvents:\"none\",style:[isDark?styles.overlayDark:styles.overlayLight,{opacity:overlayOpacity}],__source:{fileName:_jsxFileName,lineNumber:118}}):null);}}]);return Card;}(React.Component);Card.contextType=ThemeContext;var styles=StyleSheet.create({cardLight:{flex:1,backgroundColor:ThemeColors.light.body},cardDark:{flex:1,backgroundColor:ThemeColors.dark.body},overlayLight:_objectSpread({},StyleSheet.absoluteFillObject,{backgroundColor:'#000'}),overlayDark:_objectSpread({},StyleSheet.absoluteFillObject,{backgroundColor:'#fff'}),shadow:{top:0,left:0,bottom:0,width:3,position:'absolute',backgroundColor:'#fff',shadowOffset:{width:-1,height:1},shadowRadius:5,shadowColor:'#000'},transparentLight:{flex:1,backgroundColor:'transparent'},transparentDark:{flex:1,backgroundColor:'transparent'}});export default createPointerEventsContainer(Card);","map":{"version":3,"sources":["StackViewCard.tsx"],"names":["EPS","Platform","accessibilityElementsHidden","importantForAccessibility","isActive","Card","React","Component","contextType","ThemeContext","children","pointerEvents","style","position","transparent","index","active","web","default","inputRange","outputRange","extrapolate","animatedStyle","shadowOpacity","overlayOpacity","containerAnimatedStyle","flattenedStyle","StyleSheet","backgroundColor","screenStyle","isDark","baseCardStyle","styles","getAccessibilityProps","opacity","cardLight","flex","ThemeColors","cardDark","overlayLight","overlayDark","shadow","top","left","bottom","width","shadowOffset","height","shadowRadius","shadowColor","transparentLight","transparentDark","createPointerEventsContainer"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  Animated,\n  StyleSheet,\n  Platform,\n  StyleProp,\n  ViewStyle,\n} from 'react-native';\nimport { Screen } from 'react-native-screens';\nimport { ThemeContext, ThemeColors } from 'react-navigation';\n\nimport createPointerEventsContainer, {\n  InputProps,\n  InjectedProps,\n} from './createPointerEventsContainer';\n\ntype Props = InputProps &\n  InjectedProps & {\n    style: StyleProp<ViewStyle>;\n    animatedStyle: any;\n    position: Animated.AnimatedInterpolation;\n    transparent?: boolean;\n    children: React.ReactNode;\n  };\n\nconst EPS = 1e-5;\n\nfunction getAccessibilityProps(isActive: boolean) {\n  if (Platform.OS === 'ios') {\n    return {\n      accessibilityElementsHidden: !isActive,\n    };\n  } else if (Platform.OS === 'android') {\n    return {\n      importantForAccessibility: isActive ? 'yes' : 'no-hide-descendants',\n    };\n  } else {\n    return {};\n  }\n}\n\n/**\n * Component that renders the scene as card for the <StackView />.\n */\nclass Card extends React.Component<Props> {\n  static contextType = ThemeContext;\n  context!: React.ContextType<typeof ThemeContext>;\n\n  render() {\n    const {\n      children,\n      pointerEvents,\n      style,\n      position,\n      transparent,\n      scene: { index, isActive },\n    } = this.props;\n\n    const active: Animated.Value | number | boolean = Platform.select({\n      web: isActive,\n      // @ts-ignore\n      default:\n        transparent || isActive\n          ? 1\n          : position.interpolate({\n              inputRange: [index, index + 1 - EPS, index + 1],\n              outputRange: [1, 1, 0],\n              extrapolate: 'clamp',\n            }),\n    });\n\n    // animatedStyle can be `false` if there is no screen interpolator\n    const animatedStyle = this.props.animatedStyle || {};\n\n    const {\n      shadowOpacity,\n      overlayOpacity,\n      ...containerAnimatedStyle\n    } = animatedStyle;\n\n    let flattenedStyle = StyleSheet.flatten(style) || {};\n    let { backgroundColor, ...screenStyle } = flattenedStyle;\n    let isDark = this.context === 'dark';\n    let baseCardStyle;\n\n    if (isDark) {\n      baseCardStyle = transparent ? styles.transparentDark : styles.cardDark;\n    } else {\n      baseCardStyle = transparent ? styles.transparentLight : styles.cardLight;\n    }\n\n    return (\n      <Screen\n        pointerEvents={pointerEvents}\n        onComponentRef={this.props.onComponentRef}\n        style={[containerAnimatedStyle, screenStyle]}\n        // @ts-ignore\n        active={active}\n      >\n        {!transparent && shadowOpacity ? (\n          <Animated.View\n            style={[styles.shadow, { shadowOpacity }]}\n            pointerEvents=\"none\"\n          />\n        ) : null}\n        <Animated.View\n          {...getAccessibilityProps(isActive)}\n          style={[\n            baseCardStyle,\n            backgroundColor && backgroundColor !== 'transparent'\n              ? { backgroundColor }\n              : null,\n          ]}\n        >\n          {children}\n        </Animated.View>\n        {overlayOpacity ? (\n          <Animated.View\n            pointerEvents=\"none\"\n            style={[\n              isDark ? styles.overlayDark : styles.overlayLight,\n              { opacity: overlayOpacity },\n            ]}\n          />\n        ) : null}\n      </Screen>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  cardLight: {\n    flex: 1,\n    backgroundColor: ThemeColors.light.body,\n  },\n  cardDark: {\n    flex: 1,\n    backgroundColor: ThemeColors.dark.body,\n  },\n  overlayLight: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: '#000',\n  },\n  overlayDark: {\n    ...StyleSheet.absoluteFillObject,\n    backgroundColor: '#fff',\n  },\n  // TODO: what should shadow be styled like?\n  shadow: {\n    top: 0,\n    left: 0,\n    bottom: 0,\n    width: 3,\n    position: 'absolute',\n    backgroundColor: '#fff',\n    shadowOffset: { width: -1, height: 1 },\n    shadowRadius: 5,\n    shadowColor: '#000',\n  },\n  transparentLight: {\n    flex: 1,\n    backgroundColor: 'transparent',\n  },\n  transparentDark: {\n    flex: 1,\n    backgroundColor: 'transparent',\n  },\n});\n\nexport default createPointerEventsContainer(Card);\n"]},"metadata":{},"sourceType":"module"}